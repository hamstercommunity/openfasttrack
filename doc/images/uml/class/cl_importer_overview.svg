<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="810px" preserveAspectRatio="none" style="width:1083px;height:810px;" version="1.1" viewBox="0 0 1083 810" width="1083px" zoomAndPan="magnify"><defs/><g><!--MD5=[7db3c59d38ae5b37b484eb2df9368145]
cluster java.util--><polygon fill="#FFFFFF" points="919,6,985,6,992,28.2969,1045,28.2969,1045,81,919,81,919,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="919" x2="992" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="60" x="923" y="20.9951">java.util</text><!--MD5=[3fb54aae0415020c5c23d6b91e5893c6]
cluster org.itsallcode.openfasttrace--><polygon fill="#FFFFFF" points="16,130,245,130,252,152.2969,1004,152.2969,1004,803,16,803,16,130" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="252" y1="152.2969" y2="152.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="223" x="20" y="144.9951">org.itsallcode.openfasttrace</text><!--MD5=[11f0f91b8673b7a07e6154dacbb90284]
cluster importer--><polygon fill="#FFFFFF" points="40,362,114,362,121,384.2969,980,384.2969,980,779,40,779,40,362" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="40" x2="121" y1="384.2969" y2="384.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="68" x="44" y="376.9951">importer</text><!--MD5=[4574ac2d66ce1e1f2937a502f455522d]
cluster zip--><polygon fill="#FFFFFF" points="583,680,612,680,619,702.2969,955,702.2969,955,755,583,755,583,680" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="583" x2="619" y1="702.2969" y2="702.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="23" x="587" y="694.9951">zip</text><!--MD5=[cf1d2b1a91fbc3ce20bf4ccf2bbc7ad7]
cluster core.serviceloader--><polygon fill="#FFFFFF" points="449,173,604,173,611,195.2969,966,195.2969,966,283,449,283,449,173" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="449" x2="611" y1="195.2969" y2="195.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="149" x="453" y="187.9951">core.serviceloader</text><!--MD5=[ef3ad5e68e8d91de2df816626e82d789]
class ServiceLoader--><rect codeLine="4" fill="#F8F8F8" height="23.9688" id="ServiceLoader" style="stroke:#383838;stroke-width:1.5;" width="94" x="935" y="41"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="88" x="938" y="57.1387">ServiceLoader</text><!--MD5=[2f7fab033fdd40c82905364dd6b40f2c]
class ImporterFactoryLoader--><rect codeLine="12" fill="#F8F8F8" height="23.9688" id="ImporterFactoryLoader" style="stroke:#383838;stroke-width:1.5;" width="148" x="799" y="427"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="142" x="802" y="443.1387">ImporterFactoryLoader</text><!--MD5=[3a5fd2f25a7869e09c30af4ba125f328]
class MultiFileImporter--><rect codeLine="15" fill="#F8F8F8" height="23.9688" id="MultiFileImporter" style="stroke:#383838;stroke-width:1.5;" width="109" x="459.5" y="575.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="103" x="462.5" y="591.6387">MultiFileImporter</text><!--MD5=[c42cc2f62cf2b85ed1c672168c570fb7]
class Importer--><rect codeLine="18" fill="#F8F8F8" height="58.7422" id="Importer" style="stroke:#383838;stroke-width:1.5;" width="125" x="603.5" y="558"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="70" x="631" y="574.1387">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="639" y="588.1074">Importer</text><line style="stroke:#383838;stroke-width:1.5;" x1="604.5" x2="727.5" y1="595.9375" y2="595.9375"/><ellipse cx="614.5" cy="606.9375" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="99" x="623.5" y="610.1479">runImport() : void</text><!--MD5=[a9797b612ade2f4d7f0496d20c5dc43d]
class ImporterFactory--><rect codeLine="22" fill="#F8F8F8" height="84.3516" id="ImporterFactory" style="stroke:#383838;stroke-width:1.5;" width="455" x="159.5" y="397"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="66" x="354" y="413.1387">«abstract»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99" x="337.5" y="427.1074">ImporterFactory</text><line style="stroke:#383838;stroke-width:1.5;" x1="160.5" x2="613.5" y1="434.9375" y2="434.9375"/><ellipse cx="170.5" cy="445.9375" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="237" x="179.5" y="449.1479">supportsFile(inputFile: InputFile) : boolean</text><ellipse cx="170.5" cy="458.7422" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="429" x="179.5" y="461.9526">createImporter(inputFile: InputFile, listener: ImportEventListener) : Importer</text><ellipse cx="170.5" cy="471.5469" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="173" x="179.5" y="474.7573">getContext() : ImporterContext</text><!--MD5=[baf855e9898b7ee45fcb8b68bf297a14]
class ImporterService--><rect codeLine="28" fill="#F8F8F8" height="57.5781" id="ImporterService" style="stroke:#383838;stroke-width:1.5;" width="369" x="125.5" y="698"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="98" x="261" y="714.1387">ImporterService</text><line style="stroke:#383838;stroke-width:1.5;" x1="126.5" x2="493.5" y1="721.9688" y2="721.9688"/><ellipse cx="136.5" cy="732.9688" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="343" x="145.5" y="736.1792">ImporterService(context: ImporterContext) : ImporterService</text><ellipse cx="136.5" cy="745.7734" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="199" x="145.5" y="748.9839">createImporter() : MultiFileImporter</text><!--MD5=[851fc3deee8f24144bcd47a7736e1116]
class RegExMatchingImporterFactory--><rect codeLine="33" fill="#F8F8F8" height="37.9375" id="RegExMatchingImporterFactory" style="stroke:#383838;stroke-width:1.5;" width="200" x="764" y="568.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="66" x="831" y="584.6387">«abstract»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="194" x="767" y="598.6074">RegExMatchingImporterFactory</text><!--MD5=[d4872d63d520a35556f422bc49b2d6d5]
class ImporterContext--><rect codeLine="36" fill="#F8F8F8" height="57.5781" id="ImporterContext" style="stroke:#383838;stroke-width:1.5;" width="368" x="56" y="558.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="189.5" y="574.6387">ImporterContext</text><line style="stroke:#383838;stroke-width:1.5;" x1="57" x2="423" y1="582.4688" y2="582.4688"/><ellipse cx="67" cy="593.4688" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="220" x="76" y="596.6792">getImporterService() : ImporterService</text><ellipse cx="67" cy="606.2734" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="342" x="76" y="609.4839">setImporterService(importerService: ImporterService) : void</text><!--MD5=[30b4d5124a8b4c7db91388862000094b]
class ZipFileImporter--><rect codeLine="42" fill="#F8F8F8" height="23.9688" id="ZipFileImporter" style="stroke:#383838;stroke-width:1.5;" width="100" x="599" y="715"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="94" x="602" y="731.1387">ZipFileImporter</text><!--MD5=[cb316120d1ee3c534133180e7d54df4e]
class ZipFileImporterFactory--><rect codeLine="45" fill="#F8F8F8" height="23.9688" id="ZipFileImporterFactory" style="stroke:#383838;stroke-width:1.5;" width="146" x="793" y="715"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="140" x="796" y="731.1387">ZipFileImporterFactory</text><!--MD5=[38537f93e2dfd3faf3bf79abe0a991b2]
class InitializingServiceLoader--><rect codeLine="62" fill="#F8F8F8" height="23.9688" id="InitializingServiceLoader" style="stroke:#383838;stroke-width:1.5;" width="154" x="796" y="225.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="148" x="799" y="241.6387">InitializingServiceLoader</text><!--MD5=[c6dd7699ff04048cb9365e543f81bf42]
class Initializable--><rect codeLine="65" fill="#F8F8F8" height="58.7422" id="Initializable" style="stroke:#383838;stroke-width:1.5;" width="227" x="465.5" y="208"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="70" x="544" y="224.1387">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="70" x="544" y="238.1074">Initializable</text><line style="stroke:#383838;stroke-width:1.5;" x1="466.5" x2="691.5" y1="245.9375" y2="245.9375"/><ellipse cx="476.5" cy="256.9375" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="201" x="485.5" y="260.1479">init(context: ImporterContext) : void</text><!--MD5=[42600d4cba6238101e86a3841eece2d8]
reverse link ZipFileImporter to ZipFileImporterFactory--><path codeLine="48" d="M704.35,727 C731.21,727 763.85,727 792.74,727 " fill="none" id="ZipFileImporter-backto-ZipFileImporterFactory" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="699.06,727,708.06,731,704.06,727,708.06,723,699.06,727" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="717.5" y="720.0669">«create»</text><!--MD5=[a30e2ea48f94315418a8aba723557042]
reverse link ImporterFactory to RegExMatchingImporterFactory--><path codeLine="51" d="M539.76,486.92 C630.09,514.66 739.34,548.21 805.17,568.43 " fill="none" id="ImporterFactory-backto-RegExMatchingImporterFactory" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="none" points="537.57,493.57,520.51,481,541.68,480.18,537.57,493.57" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[d3b5ecc5173f300732c93ac8545eded2]
reverse link RegExMatchingImporterFactory to ZipFileImporterFactory--><path codeLine="52" d="M864.56,627.19 C865,656.92 865.56,696.01 865.84,714.87 " fill="none" id="RegExMatchingImporterFactory-backto-ZipFileImporterFactory" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="none" points="857.56,626.86,864.27,606.76,871.56,626.65,857.56,626.86" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[f73749f4463e806a096400e40474c45a]
link ImporterContext to ImporterService--><path codeLine="53" d="M254.33,616.66 C265.66,638.9 281.48,669.98 293.36,693.32 " fill="none" id="ImporterContext-to-ImporterService" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="295.68,697.88,295.1574,688.045,293.4097,693.4251,288.0296,691.6774,295.68,697.88" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="279" y="660.0669">contains</text><!--MD5=[18072d6113b7fe29a25873db970b2bfa]
reverse link MultiFileImporter to ImporterService--><path codeLine="54" d="M493.4,602.39 C460.33,624.68 394.74,668.88 351.63,697.94 " fill="none" id="MultiFileImporter-backto-ImporterService" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="497.65,599.52,487.9467,601.2072,493.4963,602.3034,492.4001,607.853,497.65,599.52" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="426" y="660.0669">«create»</text><!--MD5=[57268deb434a54312cedc56637cb441d]
reverse link MultiFileImporter to ZipFileImporter--><path codeLine="55" d="M526.08,603.78 C539.15,619.79 561.07,645.19 583,664 C587.86,668.17 590.04,667.94 595,672 C611.41,685.45 628.4,703.18 638.83,714.59 " fill="none" id="MultiFileImporter-backto-ZipFileImporter" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="522.63,599.52,525.1798,609.0331,525.7743,603.4076,531.3999,604.0021,522.63,599.52" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="584" y="660.0669">delegates</text><!--MD5=[c7969328e64448dea0ab488ca6f9b964]
reverse link Importer to ZipFileImporter--><path codeLine="56" d="M659.96,637.36 C656.51,665.23 652.48,697.86 650.4,714.69 " fill="none" id="Importer-backto-ZipFileImporter" style="stroke:#383838;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="653.04,636.31,662.44,617.32,666.93,638.03,653.04,636.31" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[6d153f8e587beb2c33eaba11870cff33]
link ImporterFactory to ImporterContext--><path codeLine="57" d="M345.66,481.2 C322.38,504.4 293.74,532.94 272.15,554.46 " fill="none" id="ImporterFactory-to-ImporterContext" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="268.48,558.12,277.6795,554.603,272.0227,554.5916,272.0341,548.9348,268.48,558.12" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="315" y="524.0669">passes</text><!--MD5=[3632adb7d287c4b1e1daace0bad614bd]
reverse link Initializable to InitializingServiceLoader--><path codeLine="68" d="M697.96,237.5 C731.01,237.5 766.03,237.5 795.99,237.5 " fill="none" id="Initializable-backto-InitializingServiceLoader" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="692.67,237.5,701.67,241.5,697.67,237.5,701.67,233.5,692.67,237.5" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="710.75" y="230.5669">«initialize»</text><!--MD5=[1081ed4561c2949eecc78300ac78d7b7]
link ImporterFactory to Initializable--><path codeLine="71" d="M426.81,396.64 C459.14,363.04 504.6,315.81 537.4,281.72 " fill="none" id="ImporterFactory-to-Initializable" style="stroke:#383838;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="532.58,276.64,551.49,267.08,542.67,286.35,532.58,276.64" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[cc5bbc1670881d85ceb38c6cf61fbfee]
reverse link InitializingServiceLoader to ImporterFactoryLoader--><path codeLine="72" d="M873,254.87 C873,294.22 873,393.33 873,426.78 " fill="none" id="InitializingServiceLoader-backto-ImporterFactoryLoader" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="873,249.51,869,258.51,873,254.51,877,258.51,873,249.51" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="891.5" y="312.0669">get</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="874" y="327.1997">available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="874.5" y="342.3325">factories</text><!--MD5=[10a5bb9c99a4960e2aa31658addbb1ab]
reverse link ImporterFactory to ImporterFactoryLoader--><path codeLine="73" d="M619.77,439 C684.67,439 750.54,439 798.83,439 " fill="none" id="ImporterFactory-backto-ImporterFactoryLoader" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="614.7,439,623.7,443,619.7,439,623.7,435,614.7,439" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="632.75" y="417.0669">find factory responsible</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="656.75" y="432.1997">for input format</text><!--MD5=[0a08baee2e43f8ab97ecc3fac61a0ee2]
link ServiceLoader to ZipFileImporterFactory--><path codeLine="76" d="M985.75,65.38 C994.77,93.87 1017,170.69 1017,236.5 C1017,236.5 1017,236.5 1017,588.5 C1017,625.87 1005.86,637.02 980,664 C958.44,686.49 926.91,702.78 902.47,712.99 " fill="none" id="ServiceLoader-to-ZipFileImporterFactory" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="897.68,714.96,907.524,715.2687,902.3105,713.0735,904.5056,707.86,897.68,714.96" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="1018" y="443.5669">«create»</text><!--MD5=[b1f330a37c37c7d7dabe0859a4b9e2e9]
reverse link ServiceLoader to InitializingServiceLoader--><path codeLine="77" d="M969.85,69.26 C963.64,77.33 956.12,87.49 950,97 C920.35,143.05 890.5,201.32 878.5,225.35 " fill="none" id="ServiceLoader-backto-InitializingServiceLoader" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="973.15,65.02,964.4636,69.6619,970.0773,68.9645,970.7748,74.5781,973.15,65.02" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="951" y="110.0669">«use»</text><!--MD5=[e56536a39a70a194bae1c2f9728ea17a]
@startuml
!include ../clean.skin

package java.util {
    class ServiceLoader {
    }
}

package org.itsallcode.openfasttrace {

    package importer {

        class ImporterFactoryLoader {
        }

        class MultiFileImporter {
        }
        
        interface Importer <<interface>> {
            + runImport() : void
        }
        
        class ImporterFactory <<abstract>> {
            + supportsFile(inputFile: InputFile) : boolean
            + createImporter(inputFile: InputFile, listener: ImportEventListener) : Importer
            * getContext() : ImporterContext
        }

        class ImporterService {
            + ImporterService(context: ImporterContext) : ImporterService 
            + createImporter() : MultiFileImporter
        }
        
        class RegExMatchingImporterFactory <<abstract>> {
        }
        
        class ImporterContext {
            + getImporterService() : ImporterService
            + setImporterService(importerService: ImporterService) : void
        }
        
        package zip {
            class ZipFileImporter {
            }
            
            class ZipFileImporterFactory {
            }
            
            ZipFileImporterFactory -left-> ZipFileImporter : <<create>>
        }
        
        RegExMatchingImporterFactory -up-|> ImporterFactory
        ZipFileImporterFactory -up-|> RegExMatchingImporterFactory
        ImporterContext -down-> ImporterService : contains
        ImporterService -up-> MultiFileImporter : <<create>>
        ZipFileImporter -up-> MultiFileImporter : delegates
        ZipFileImporter .up.|> Importer
        ImporterFactory -down-> ImporterContext : passes
    }


    package core.serviceloader {
        class InitializingServiceLoader {
        }

        interface Initializable <<interface>> {
            + init(context: ImporterContext) : void
        }
        InitializingServiceLoader -left-> Initializable : <<initialize>>
    }

    ImporterFactory .right.|> Initializable
    ImporterFactoryLoader -up-> InitializingServiceLoader : get\navailable\nfactories
    ImporterFactoryLoader -left-> ImporterFactory : find factory responsible\nfor input format
}

ServiceLoader -down-> ZipFileImporterFactory : <<create>>
InitializingServiceLoader -up-> ServiceLoader : <<use>>

@enduml

@startuml
skinparam monochrome true
skinparam style strictuml

!pragma horizontalLineBetweenDifferentPackageAllowed

hide empty methods
hide empty attributes


package java.util {
    class ServiceLoader {
    }
}

package org.itsallcode.openfasttrace {

    package importer {

        class ImporterFactoryLoader {
        }

        class MultiFileImporter {
        }
        
        interface Importer <<interface>> {
            + runImport() : void
        }
        
        class ImporterFactory <<abstract>> {
            + supportsFile(inputFile: InputFile) : boolean
            + createImporter(inputFile: InputFile, listener: ImportEventListener) : Importer
            * getContext() : ImporterContext
        }

        class ImporterService {
            + ImporterService(context: ImporterContext) : ImporterService 
            + createImporter() : MultiFileImporter
        }
        
        class RegExMatchingImporterFactory <<abstract>> {
        }
        
        class ImporterContext {
            + getImporterService() : ImporterService
            + setImporterService(importerService: ImporterService) : void
        }
        
        package zip {
            class ZipFileImporter {
            }
            
            class ZipFileImporterFactory {
            }
            
            ZipFileImporterFactory -left-> ZipFileImporter : <<create>>
        }
        
        RegExMatchingImporterFactory -up-|> ImporterFactory
        ZipFileImporterFactory -up-|> RegExMatchingImporterFactory
        ImporterContext -down-> ImporterService : contains
        ImporterService -up-> MultiFileImporter : <<create>>
        ZipFileImporter -up-> MultiFileImporter : delegates
        ZipFileImporter .up.|> Importer
        ImporterFactory -down-> ImporterContext : passes
    }


    package core.serviceloader {
        class InitializingServiceLoader {
        }

        interface Initializable <<interface>> {
            + init(context: ImporterContext) : void
        }
        InitializingServiceLoader -left-> Initializable : <<initialize>>
    }

    ImporterFactory .right.|> Initializable
    ImporterFactoryLoader -up-> InitializingServiceLoader : get\navailable\nfactories
    ImporterFactoryLoader -left-> ImporterFactory : find factory responsible\nfor input format
}

ServiceLoader -down-> ZipFileImporterFactory : <<create>>
InitializingServiceLoader -up-> ServiceLoader : <<use>>

@enduml

PlantUML version 1.2021.5(Sun Apr 25 13:20:28 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>